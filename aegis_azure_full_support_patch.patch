*** Begin Patch
*** Add File: scripts/detect_pod_identity_variant.sh
+#!/usr/bin/env bash
+set -euo pipefail
+#
+# detect_pod_identity_variant.sh
+# Detect whether the cluster uses aad-pod-identity v1 or pod-identity v2 (or none).
+# Prints one of: "aad-pod-identity-v1", "pod-identity-v2", "none"
+#
+if kubectl get crds | grep -E -i 'azureidentities|azureidentitybindings|azureassignedidentities' >/dev/null 2>&1; then
+  echo "aad-pod-identity-v1"
+  exit 0
+fi
+
+# Pod-identity v2 implementations use different CRD names; check common variations
+if kubectl get crds | grep -E -i 'podidentity|azureassignedidentities' >/dev/null 2>&1; then
+  echo "pod-identity-v2"
+  exit 0
+fi
+
+echo "none"
+exit 0
+
*** End Patch
*** Begin Patch
*** Add File: infra/azure/azureidentity_examples.yaml
+---
+# Example AzureIdentity (aad-pod-identity v1)
+apiVersion: "aadpodidentity.k8s.io/v1"
+kind: AzureIdentity
+metadata:
+  name: milvus-backup-identity
+spec:
+  type: 1
+  resourceID: "/subscriptions/<SUB>/resourceGroups/<RG>/providers/Microsoft.ManagedIdentity/userAssignedIdentities/<UAMI_NAME>"
+  clientID: "<UAMI_CLIENT_ID>"
+---
+apiVersion: "aadpodidentity.k8s.io/v1"
+kind: AzureIdentityBinding
+metadata:
+  name: milvus-backup-binding
+spec:
+  azureIdentity: milvus-backup-identity
+  selector: milvus-backup-selector
+
+---
+# Example pod-identity v2 style (AzureAssignedIdentity / AzureIdentityBinding - CR names may vary by implementation)
+apiVersion: aadpodidentity.io/v1
+kind: AzureAssignedIdentity
+metadata:
+  name: milvus-backup-assigned
+spec:
+  clientID: "<UAMI_CLIENT_ID>"
+  resourceID: "/subscriptions/<SUB>/resourceGroups/<RG>/providers/Microsoft.ManagedIdentity/userAssignedIdentities/<UAMI_NAME>"
+  azureIdentityBinding: milvus-backup-binding
+

î€€
