replicaCount: 2

image:
  repository: your-registry/aegis-api
  tag: "latest"
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 8080
  targetPort: 8080

resources:
  # defaults - tune for your models and node sizes
  requests:
    cpu: "500m"
    memory: "1Gi"
  limits:
    cpu: "2000m"
    memory: "8Gi"

env:
  - name: DATABASE_URL
    value: "postgresql+psycopg2://postgres:password@postgres:5432/aegis"

readinessProbe:
  httpGet:
    path: /ready
    port: 8080
  initialDelaySeconds: 10
  periodSeconds: 15
  failureThreshold: 3
  timeoutSeconds: 5

livenessProbe:
  httpGet:
    path: /health
    port: 8080
  initialDelaySeconds: 30
  periodSeconds: 20
  failureThreshold: 3
  timeoutSeconds: 5

nodeSelector: {}
tolerations: []
affinity: {}

# GPU support
gpu:
  enabled: false
  # example: request 1 nvidia GPU
  count: 0
  resourceName: "nvidia.com/gpu"
  nodeSelector:
    accelerator: nvidia
  tolerations:
    - key: "nvidia.com/gpu"
      operator: "Exists"
      effect: "NoSchedule"

hpa:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  # simple CPU target (percent of requested)
  targetCPUUtilizationPercentage: 50
  # For advanced metrics (Prometheus Adapter), set useCustomMetric=true and configure metricName/metricSelector
  useCustomMetric: false
  customMetric:
    metricName: "aegis_requests_per_second"
    targetValue: 100

podDisruptionBudget:
  enabled: true
  minAvailable: 1

vpa:
  enabled: false
  mode: "Auto"   # Off | Auto | Recommend

podAnnotations: {}
podLabels: {}
