  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
# TPU scheduling hints for helm/aegis-api values
# Add these to your helm values to schedule pods onto TPU-capable nodes (if you have k8s nodes labelled for TPU).
affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
        - matchExpressions:
            - key: "cloud.google.com/gke-accelerator"
              operator: In
              values:
                - "tpu-vm"   # example label; use the label your k8s TPU nodes use
tolerations:
  - key: "nvidia.com/gpu"
    operator: "Exists"
    effect: "NoSchedule"
  - key: "tpu.k8s.io/accelerator"
    operator: "Exists"
    effect: "NoSchedule"
podAnnotations:
  # annotate to indicate TPU scheduling intent
  aegis/accelerator: "tpu"
resources:
  requests:
    cpu: "2000m"
    memory: "8Gi"
  limits:
    cpu: "4000m"
    memory: "16Gi"
