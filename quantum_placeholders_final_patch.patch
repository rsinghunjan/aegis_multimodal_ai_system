*** Begin Patch
*** Add File:terraform/irsa/placeholder.tfvars.example
+/*
+Example tfvars with clear placeholder tokens. Copy this file to terraform/irsa/my.tfvars
+and replace all REPLACE_* tokens with your real values before running terraform.
+
+Important: keep this file secure (it may contain ARNs and account IDs). Do not commit real secrets.
+*/
+cluster_name = "REPLACE_CLUSTER_NAME"
+account_id   = "REPLACE_AWS_ACCOUNT_ID"
+oidc_provider_arn = "REPLACE_OIDC_PROVIDER_ARN"
+policy_arn_braket = "REPLACE_POLICY_ARN_BRAKET"
+policy_arn_ibm    = "REPLACE_POLICY_ARN_IBM"
+policy_arn_azure  = "REPLACE_POLICY_ARN_AZURE"
+policy_arn_rigetti = "REPLACE_POLICY_ARN_RIGETTI"
+
*** End Patch
*** Begin Patch
*** Add File:ops/replace_placeholders.sh
+#!/usr/bin/env bash
+set -euo pipefail
+#
+# Scan the repository for REPLACE_* placeholder tokens and list them for operators.
+# Optionally generate a report mapping file -> placeholders found.
+#
+OUT=${1:-/tmp/placeholders_report.txt}
+echo "Scanning repository for REPLACE_* placeholders..."
+grep -RIn --exclude-dir=.git --exclude=*.bak --exclude=*.pyc "REPLACE_" || true | tee "$OUT"
+echo
+echo "Report written to $OUT. Please replace tokens with real values before applying any manifests or running terraform."
+echo "Common placeholders to replace:"
+cat <<'EOF'
+ - REPLACE_AWS_ACCOUNT_ID
+ - REPLACE_CLUSTER_NAME
+ - REPLACE_OIDC_PROVIDER_ARN
+ - REPLACE_POLICY_ARN_BRAKET
+ - REPLACE_POLICY_ARN_IBM
+ - REPLACE_POLICY_ARN_AZURE
+ - REPLACE_POLICY_ARN_RIGETTI
+ - REPLACE_COSIGN_KMS_ARN
+ - REPLACE_EVIDENCE_BUCKET
+ - REPLACE_GHCR_ORG
+ - REPLACE_IMAGE_TAG
+ - REPLACE_MLFLOW_URI
+ - REPLACE_REKOR_URL
+ - REPLACE_SANDBOX_BUDGET_USD
+EOF
+
+exit 0
+
*** End Patch
*** Begin Patch
*** Add File:ops/validate_no_placeholders.sh
+#!/usr/bin/env bash
+set -euo pipefail
+#
+# Fail if any REPLACE_* tokens remain in tracked files. Use as a final pre-commit or pre-deploy check.
+#
+echo "Validating repository for unreplaced REPLACE_* tokens..."
+matches=$(git ls-files -z | xargs -0 grep -I --line-number -H "REPLACE_" || true)
+if [ -n "$matches" ]; then
+  echo "ERROR: Found unreplaced REPLACE_ tokens in the repository:"
+  echo "$matches"
+  exit 2
+fi
+echo "No REPLACE_ tokens found in tracked files."
+exit 0
+
*** End Patch
*** Begin Patch
*** Add File:docs/operator_placeholder_runbook.md
+# Operator Runbook — Replacing REPLACE_* placeholders and secure application
+
+This document explains how to safely replace placeholder tokens (REPLACE_*) included in the quantum integration artifacts, validate the replacements and apply resources to staging and production.
+
+Files to inspect (non exhaustive):
+- terraform/irsa/placeholder.tfvars.example
+- k8s/irsa/*.yaml
+- k8s/externalsecrets/*.yaml
+- argo/*.yaml
+- .github/workflows/*.yml
+- ops/*.sh and ops/*.py (some scripts include placeholders)
+- mlflow/quantum_schema.json and mlflow helpers (may include REPLACE_ URIs)
+
+Common placeholders (replace all occurrences):
+- REPLACE_AWS_ACCOUNT_ID — Your AWS account id (12-digit).
+- REPLACE_CLUSTER_NAME — EKS cluster name.
+- REPLACE_OIDC_PROVIDER_ARN — OIDC provider ARN for the cluster.
+- REPLACE_POLICY_ARN_* — IAM policy ARNs you created for providers (Braket, IBM, Azure, Rigetti).
+- REPLACE_COSIGN_KMS_ARN — KMS key ARN used for cosign signing of artifacts.
+- REPLACE_EVIDENCE_BUCKET — S3 bucket for evidence/artifact uploads.
+- REPLACE_GHCR_ORG — Container registry org (ghcr.io/yourorg).
+- REPLACE_IMAGE_TAG — Image tag for images (e.g., latest, v1.0.0).
+- REPLACE_MLFLOW_URI — MLflow tracking URI.
+- REPLACE_REKOR_URL — Rekor server URL.
+- REPLACE_SANDBOX_BUDGET_USD — Budget value for nightly sandbox enforcement.
+
+Step 0 — Preparation (operator)
+1. Clone the repo and work on a feature branch:
+   git checkout -b ops/quantum-fill-placeholders
+2. Run a scan to see all placeholders:
+   ./ops/replace_placeholders.sh /tmp/placeholders_report.txt
+3. Review the report and plan replacements. Do not put secrets into git. Use local files for tfvars and CI/GitHub secrets for secrets.
+
+Step 1 — Replace placeholders safely
+- Terraform / TFVARS:
+  - Copy terraform/irsa/placeholder.tfvars.example to terraform/irsa/my.tfvars (never commit my.tfvars).
+  - Replace REPLACE_* tokens in my.tfvars with real values.
+  - Example:
+      cp terraform/irsa/placeholder.tfvars.example terraform/irsa/my.tfvars
+      # Edit terraform/irsa/my.tfvars and replace tokens
+
+- Kubernetes manifests:
+  - For k8s manifests with REPLACE_* tokens, do NOT commit secrets. Instead:
+    - Use kustomize with a secretGenerator that reads from env vars or files, or
+    - Use Helm value overrides supplied at deploy time (helm -f my-values.yaml).
+  - If you must create a manifest with replaced ARNs, store in a temporary branch and open PR for peer review.
+
+- GitHub / CI:
+  - Set GitHub repository secrets for COSIGN_KMS_ARN, REKOR_URL, EVIDENCE_BUCKET, MLFLOW_TRACKING_URI, SANDBOX secrets.
+  - Do not commit these secrets into repo.
+
+Step 2 — Validate replacements locally (dry-run)
+1. Ensure no REPLACE_* tokens remain in tracked files:
+   ./ops/validate_no_placeholders.sh
+2. For terraform:
+   cd terraform/irsa
+   terraform init
+   terraform plan -var-file=my.tfvars
+   # Review plan carefully
+3. For k8s manifests, run:
+   kubectl apply --dry-run=client -f <manifest>
+
+Step 3 — Apply to staging (operator, with peer review)
+1. Apply Terraform (IRSA roles):
+   terraform apply -var-file=my.tfvars
+2. Create IRSA serviceaccounts via eksctl if preferred:
+   ./ops/create_irsa_eksctl.sh --cluster REPLACE_CLUSTER_NAME --region REPLACE_AWS_REGION --braket-policy REPLACE_POLICY_ARN_BRAKET ...
+3. Deploy k8s manifests to staging namespace (ensure secrets exist as ExternalSecrets or kustomize secrets):
+   kubectl apply -k k8s/overlays/staging
+4. Build & push images (CI), then verify signatures:
+   ./ops/run_build_and_verify.sh REPLACE_IMAGE_TAG
+5. Wire images into overlays and apply:
+   ./ops/wire_images_into_kustomize.sh --registry REPLACE_GHCR_ORG --tag REPLACE_IMAGE_TAG --overlay k8s/overlays/staging
+   ./ops/apply_kustomize_and_deploy.sh k8s/overlays/staging
+
+Step 4 — Simulate & validate MLflow (staging)
+1. Submit Argo workflows in simulate mode:
+   argo submit -n aegis argo/quantum_braket_workflow.yaml -p run-type=simulate -p image=REPLACE_GHCR_ORG/aegis-quantum:REPLACE_IMAGE_TAG -p circuit-file-s3=s3://REPLACE_EVIDENCE_BUCKET/...
+2. Validate MLflow run:
+   python3 mlflow/validate_quantum_mlflow.py --run-id <RUN_ID> --tracking-uri REPLACE_MLFLOW_URI
+
+Step 5 — Nightly sandbox testing & budget enforcement
+1. Populate GitHub repo secrets for nightly sandbox (SANDBOX_*).
+2. Configure REPLACE_SANDBOX_BUDGET_USD in secrets.
+3. Enable .github/workflows/nightly_qpu_sandbox.yml after confirming placeholders replaced.
+
+Step 6 — Production cutover (after approvals)
+- Ensure legal signoff and audit artifacts are present in s3://REPLACE_EVIDENCE_BUCKET/legal_signoff/
+- Ensure monitoring & alerts are tuned and registered to Ops on-call.
+- Move kustomize overlay to production and run the deploy procedure (with approval).
+
+Security & rotation checklist (must do)
+- Use IRSA roles whenever possible — avoid committing provider API keys.
+- If using ExternalSecrets, rotate provider credentials regularly and use short lived creds.
+- After initial runs, rotate any keys used for cosign signing and update GitHub secrets accordingly.
+- Limit who can apply qpu-approved label in GitHub (use teams).
+
+Rollback guidance
+- If a deployment causes incidents, run:
+  kubectl -n aegis rollout undo deployment/<name>
+- To remove recently-created IRSA roles or policies, review Terraform state and plan a controlled rollback.
+
+Final note
+Replace all REPLACE_* tokens before running Terraform, Argo or CI workflows. Use the provided validation script ./ops/validate_no_placeholders.sh as a gating step in your CI and pre-deploy checks.
+
*** End Patch
*** Begin Patch
*** Add File:README_PLACEHOLDERS.md
+# REPLACE_* placeholders — guidance and quick checklist
+
+This repository contains many REPLACE_* placeholder tokens for ARNs, account IDs, bucket names and image tags. They are intentionally left as placeholders for operator safety.
+
+Quick checklist:
+- Run: ./ops/replace_placeholders.sh to list all placeholders and affected files.
+- Copy terraform/irsa/placeholder.tfvars.example -> terraform/irsa/my.tfvars and replace tokens there (do not commit my.tfvars).
+- Use kustomize/helm to inject provider-specific ARNs into manifests at deploy time rather than committing values.
+- Add GitHub repository secrets for COSIGN_KMS_ARN, REKOR_URL, EVIDENCE_BUCKET, SANDBOX_* and MLFLOW_TRACKING_URI.
+- Run: ./ops/validate_no_placeholders.sh before any apply/CI run to ensure no placeholders remain.
+
+Security reminder: never commit real credentials or KMS keys to git. Use secrets managers and IRSA where possible.
+
*** End Patch
*** End Patch
