
apiVersion: v1
kind: ConfigMap
metadata:
  name: prometheus-adapter-config
  namespace: custom-metrics
data:
  config.yaml: |
    rules:
      seriesQuery: 'aegis_inference_queue_depth'
      resources:
        overrides:
          namespace:
            resource: namespace
          pod:
            resource: pod
      name:
        matches: "^(.*)_queue_depth"
        as: "${1}_queue_depth"
      metricsQuery: 'avg(aegis_inference_queue_depth) by (pod)'
# Notes:
# - This is a simple example; prometheus-adapter config requires tuning and RBAC in the cluster.
# - The mapping ensures the metric aegis_inference_queue_depth is available through the custom metrics API.
