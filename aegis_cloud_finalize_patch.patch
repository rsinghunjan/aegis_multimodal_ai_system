*** Begin Patch
*** Add File: scripts/aws_attach_policies_and_trigger_drill.sh
+#!/usr/bin/env bash
+set -euo pipefail
+#
+# aws_attach_policies_and_trigger_drill.sh
+# 1) Create strict S3+KMS managed policies for the backup bucket and attach to IRSA role
+# 2) Trigger a staging backup->restore drill locally or via GitHub Actions
+# 3) Tag any created resources for chargeback
+#
+# Usage:
+#   ./scripts/aws_attach_policies_and_trigger_drill.sh --bucket BUCKET --kms-arn KMS_ARN --role ROLE_NAME [--tag key=value] [--run-workflow gh|local]
+#
+BUCKET=""
+KMS_ARN=""
+ROLE=""
+TAG=""
+RUN_WORKFLOW="local"
+
+while [ $# -gt 0 ]; do
+  case "$1" in
+    --bucket) BUCKET="$2"; shift 2;;
+    --kms-arn) KMS_ARN="$2"; shift 2;;
+    --role) ROLE="$2"; shift 2;;
+    --tag) TAG="$2"; shift 2;;
+    --run-workflow) RUN_WORKFLOW="$2"; shift 2;; # "gh" or "local"
+    -h|--help) echo "Usage: $0 --bucket BUCKET --kms-arn KMS_ARN --role ROLE_NAME [--tag key=value] [--run-workflow gh|local]"; exit 0;;
+    *) echo "Unknown arg: $1"; exit 2;;
+  esac
+done
+
+if [ -z "$BUCKET" ] || [ -z "$KMS_ARN" ] || [ -z "$ROLE" ]; then
+  echo "Missing required args"
+  exit 2
+fi
+
+echo "Generating and applying strict S3+KMS policies for bucket ${BUCKET} and KMS ${KMS_ARN}"
+mkdir -p /tmp/aegis-aws-policies
+S3_POLICY_OUT="/tmp/aegis-aws-policies/s3_backup_${BUCKET}.json"
+KMS_POLICY_OUT="/tmp/aegis-aws-policies/kms_backup.json"
+sed "s|YOUR_MILVUS_BACKUP_BUCKET|${BUCKET}|g; s|arn:aws:kms:REGION:ACCOUNT_ID:key/REPLACE_ME_KEY_ID|${KMS_ARN}|g" infra/iam/aws/managed_policies/s3_backup_policy_prod_strict.json > "$S3_POLICY_OUT"
+sed "s|arn:aws:kms:REGION:ACCOUNT_ID:key/REPLACE_ME](#)*
î€€
